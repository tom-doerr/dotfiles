{
  "env": {
    "MAX_THINKING_TOKENS": "32000",
    "CLAUDE_CODE_MAX_OUTPUT_TOKENS": "32000",
    "BASH_DEFAULT_TIMEOUT_MS": "180000",
    "BASH_MAX_TIMEOUT_MS": "5400000"
  },
  "permissions": {
    "allow": [
      "Bash(psql -U tom -d twitter -c 'SELECT *'):*",
      "Bash(psql -U tom -d twitter -c \"SELECT *\"):*",
      "Bash(psql -U tom twitter -c 'SELECT *'):*",
      "Bash(psql -U tom -d twitter -c 'EXPLAIN *'):*",
      "Bash(psql -U tom -d twitter -c '\\dt'):*",
      "Bash(psql -U tom -d twitter -c '\\dt *'):*",
      "Bash(psql -U tom -d twitter -c '\\d *'):*",
      "Bash(ls:*)",
      "Bash(grep:*)",
      "Bash(date:*)",
      "Bash(echo:*)",
      "Bash(tail:*)",
      "Bash(head:*)",
      "Bash(cat:*)",
      "Bash(curl:*)",
      "Bash(diff:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git push:*)",
      "Bash(journalctl:*)",
      "Bash(make:*)",
      "Bash(mkdir:*)",
      "Bash(rg:*)",
      "Bash(pytest:*)",
      "Bash(:venv/bin/python:*)",
      "Bash(flake:*)",
      "Bash(pylint:*)",
      "Bash(black:*)",
      "Bash(docker:*)",
      "Bash(npm:*)",
      "Bash(vitest:*)",
      "Bash(cypress:*)",
      "Bash(git mv:*)",
      "Bash(git rm:*)",
      "Bash(pgrep:*)",
      "Bash(docker-compose:*)",
      "Bash(npx:*)",
      "Bash(npx:*)",
      "Bash(readlink:*)",
      "Bash(radon:*)",
      "Bash(find:*)",
      "Bash(ruff:*)",
      "Bash(git status:*)",
      "Bash(git diff:*)",
      "Bash(git log:*)",
      "Bash(git worktree:*)",
      "Bash(tree:*)",
      "Bash(sed -n:*)",
      "Bash(systemctl --user is-active:*)",
      "Bash(systemctl --user daemon-reload:*)",
      "Bash(systemctl --user restart:*)",
      "Bash(systemctl --user enable:*)",
      "Bash(systemctl --user start:*)",
      "Bash(python -m pytest:*)",
      "Bash(uv:*)"
    ]
  },
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "/home/tom/.local/bin/cc-approver hook",
            "timeout": 30
          }
        ]
      },
      {
        "matcher": "Write|Edit|MultiEdit",
        "hooks": [
          {
            "type": "command",
            "command": "/home/tom/.claude/hooks/limit-write-size.py --limit-bytes 500",
            "timeout": 5
          }
        ]
      }
    ]
  },
  "alwaysThinkingEnabled": true,
  "policy": {
    "approverInstructions": "Deny destructive ops such as rm but allow git rm since we could undo the operation if necessary; allow read-only, tests and also allow systemctl commands but require approval for disabling or stopping services; approv restarting services. allow creating symlinks in the service files dir but do not allow copying to it. Instead of copying to the systemd dir it should create symlinks to service files in our repos so we have the service files in version control. Allow git commands such as add, commit, push, mv, diff, status, git rm, but ask on dangerous git commands such as reset, revert. Allow running python scripts if they don't look dangerous. Allow running hyperparameter studies. git stash should need approval. Deny operations that are writing code to files since the agent should not use commands to write code to files but instead use the proper write tools so write limits are not circumvented. Do require manual approval for psql commands that are not read-only. Ask for confirmation for running kill commands. Read-only commands such as psql select commands are okay to autorun, approve those. Copy operations are usually okay, you can approve those. Do not block docker container run commands because they include the --trust-remote-code flag. Do allow docker stop commands. Ask me to approve non read only psql operations."
  },
  "dspyApprover": {
    "model": "openrouter/google/gemini-3-flash-preview",
    "historyBytes": 0,
    "compiledModelPath": "$CLAUDE_PROJECT_DIR/.claude/models/approver.compiled.json",
    "optimizer": "mipro",
    "auto": "light"
  }
}
